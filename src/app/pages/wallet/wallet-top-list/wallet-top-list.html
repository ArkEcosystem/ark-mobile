<ion-header no-shadow no-border>
	<ion-toolbar>
		<ion-buttons slot="start">
			<ion-back-button></ion-back-button>
		</ion-buttons>

		<ion-title *ngIf="!isSearch">
			{{ 'WALLETS_PAGE.TOP_WALLETS' | translate }}</ion-title
		>

		<ion-searchbar
			#searchbar
			*ngIf="isSearch"
			[(ngModel)]="searchQuery"
			spellcheck="false"
			animated="true"
			showCancelButton="false"
			placeholder="{{ 'SEARCH' | translate }}"
		></ion-searchbar>

		<ion-buttons slot="end">
			<ion-button (click)="toggleSearchBar()">
				<ion-icon
					slot="icon-only"
					[name]="isSearch ? 'close' : 'search'"
				></ion-icon>
			</ion-button>
		</ion-buttons>
	</ion-toolbar>
</ion-header>

<ion-content tappable overflow-scroll="false" class="top-wallet-list">
	<ion-list>
		<ng-template ngFor let-topWallet [ngForOf]="topWallets" let-i="index">
			<ion-item
				detail
				lines="none"
				(click)="openDetailModal(topWallet)"
				*ngIf="topWallet.username?.toLowerCase().includes(searchQuery.toLowerCase()) || topWallet.address?.toLowerCase().includes(searchQuery.toLowerCase())"
				tappable
				nowrap
				class="ion-text-left top-wallet-item custom-arrow"
			>
				<ion-grid>
					<ion-row class="ion-align-items-center">
						<ion-col col-2 class="ion-text-center"
							><span>{{ i + 1}}</span></ion-col
						>
						<ion-col col-10>
							<ion-row>
								<ion-col>
									<span class="username"
										>{{ topWallet?.username ?
										topWallet?.username:
										topWallet?.address}}</span
									>
								</ion-col>
							</ion-row>
							<ion-row>
								<ion-col>
									<span class="balance"
										>{{ network?.symbol }} {{
										getBalance(topWallet?.balance) | number:
										'1.0-8' }}
									</span>
								</ion-col>
							</ion-row>
						</ion-col>
					</ion-row>
				</ion-grid>
			</ion-item>
		</ng-template>
	</ion-list>

	<ion-infinite-scroll (ionInfinite)="fetchWallets($event)">
		<ion-infinite-scroll-content
			loadingSpinner="bubbles"
			loadingText="Fetching wallets..."
		>
		</ion-infinite-scroll-content>
	</ion-infinite-scroll>
</ion-content>
